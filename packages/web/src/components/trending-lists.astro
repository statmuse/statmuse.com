---
import TrendingList from '@components/trending-list.astro'
import type { TrendingItem } from 'src/types'
import AditudeAdTrending from '@components/aditude-ad-trending.svelte'
import Panel from '@components/panel.astro'

interface Props {
  item: TrendingItem
}

const { item } = Astro.props
---

<div class="space-y-3 gap-3 justify-center sm:gap-3 md:columns-2 lg:columns-3">
  {
    item?.datasets?.map((dataset, index) => (
      <Fragment>
        <TrendingList
          title={`Trending ${dataset.name}`}
          items={dataset.items}
          moreUrl={`${Astro.url.pathname}/${dataset.key}${Astro.url.search}`}
          prominent={dataset.prominent}
          eager={index < 3}
          class:list={{
            '!mt-0': index === 0,
            'break-inside-avoid-column': true,
          }}
        />
        <AditudeAdTrending
          client:only="svelte"
          slotId={`trending-slot-${index}`}
        />
      </Fragment>
    ))
  }
  {
    !item || !item.datasets?.length ? (
      <Panel>
        <div class="h-96">
          <div class="h-full w-full flex justify-center items-center text-center text-opacity-65">
            <div>
              <p>Gathering data</p>
              <p>Check back later</p>
            </div>
          </div>
        </div>
      </Panel>
    ) : null
  }
</div>
