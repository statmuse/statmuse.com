---
import type { GameraGalleryImage } from '@statmuse/core/gamera'
import type { HTMLAttributes } from 'astro/types'
import Image from '@components/image.astro'

interface Props extends HTMLAttributes<'div'> {
  representatives: GameraGalleryImage[]
  title?: string
  alt: string
  fallback: string
}

const { representatives, alt, fallback } = Astro.props

const getIllustrationHeight = (image: GameraGalleryImage) => {
  const specialPlayers = [
    'Davante Adams',
    'Ja Morant',
    'Darius Garland',
    'Jarrett Allen',
    'Collin Sexton',
    'Coby White',
    'Isaiah Stewart',
    'Jalen Ramsey',
  ]
  if (specialPlayers.includes(image.entity?.display ?? '')) {
    return 158
  }

  return 128
}
---

<>
  {
    representatives.length === 0 && (
      <div
        class:list={{
          '!h-32 w-52 flex items-center justify-center': true,
          '!my-3 md:!my-0 md:!-mb-3': true,
          [Astro.props.class ?? '']: !!Astro.props.class,
        }}
      >
        <Image
          data-cy-illustration
          class="md:h-[150%] md:w-[150%] object-cover object-bottom md:object-right"
          alt={alt}
          src={fallback}
          width={750}
          height={750}
          loading="eager"
        />
      </div>
    )
  }
  {
    representatives.length === 1 && (
      <div
        class:list={{
          'flex items-end justify-center': true,
          [Astro.props.class ?? '']: !!Astro.props.class,
        }}
      >
        <Image
          data-cy-illustration
          class="max-w-[200px] object-contain object-bottom"
          alt={representatives[0].entity?.display ?? ''}
          src={representatives[0].url}
          style={`height: ${getIllustrationHeight(representatives[0])}px;`}
          width={600}
          height={600}
          loading="eager"
        />
      </div>
    )
  }
  {
    representatives.length === 3 && (
      <div
        class:list={{
          'flex items-end justify-center w-[300px]': true,
          [Astro.props.class ?? '']: !!Astro.props.class,
        }}
      >
        <div class="relative">
          <Image
            data-cy-illustration
            class="max-w-[200px] absolute bottom-0 left-0 -translate-x-[80px] object-contain object-bottom"
            alt={representatives[0].entity?.display ?? ''}
            src={representatives[0].url}
            style={`height: ${getIllustrationHeight(representatives[0])}px;`}
            width={600}
            height={600}
            loading="eager"
          />
          <Image
            data-cy-illustration
            class="max-w-[200px] relative z-[1] object-contain object-bottom"
            alt={representatives[1].entity?.display ?? ''}
            src={representatives[1].url}
            style={`height: ${getIllustrationHeight(representatives[1])}px;`}
            width={600}
            height={600}
            loading="eager"
          />
          <Image
            data-cy-illustration
            class="max-w-[200px] absolute bottom-0 right-0 translate-x-[80px] object-contain object-bottom"
            alt={representatives[2].entity?.display ?? ''}
            src={representatives[2].url}
            style={`height: ${getIllustrationHeight(representatives[2])}px;`}
            width={600}
            height={600}
            loading="eager"
          />
        </div>
      </div>
    )
  }
  {
    representatives.length === 2 && (
      <div
        class:list={{
          'flex items-end justify-center w-[240px]': true,
          [Astro.props.class ?? '']: !!Astro.props.class,
        }}
      >
        <Image
          data-cy-illustration
          class="translate-x-1/4 object-contain object-bottom"
          alt={representatives[0].entity?.display ?? ''}
          src={representatives[0].url}
          style={`height: ${getIllustrationHeight(representatives[0])}px;`}
          width={600}
          height={600}
          loading="eager"
        />
        <Image
          data-cy-illustration
          class="-translate-x-1/4 z-[1] object-contain object-bottom"
          alt={representatives[1].entity?.display ?? ''}
          src={representatives[1].url}
          style={`height: ${getIllustrationHeight(representatives[1])}px;`}
          width={600}
          height={600}
          loading="eager"
        />
      </div>
    )
  }
</>
