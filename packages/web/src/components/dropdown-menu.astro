---
import ElephantIcon from '@components/icons/elephant.astro'
import HamburgerIcon from '@components/icons/hamburger.astro'
import CloseIcon from '@components/icons/x.astro'
import Logo from '@components/logo.astro'

Logo

const menuLinks = [
  {
    links: [
      {
        text: 'Home',
        icon: '/menu-icons/icon-home.svg',
        tealIcon: '/menu-icons/teal/icon-home.svg',
        url: '/',
        currentUrl: new RegExp('^/(nba|nfl|nhlmlb|pga)?$'),
      },
      {
        text: 'Money Search',
        icon: '/menu-icons/icon-money.svg',
        tealIcon: '/menu-icons/teal/icon-money.svg',
        url: '/money',
        currentUrl: new RegExp('^/money$'),
      },
      {
        text: 'Trending',
        icon: '/menu-icons/icon-trending.svg',
        tealIcon: '/menu-icons/teal/icon-trending.svg',
        url: '/questions',
        currentUrl: new RegExp(
          '^(/(nba|nfl|nhl|mlb|pga|fantasy|money))?/questions$'
        ),
      },
      {
        text: 'Gallery',
        icon: '/menu-icons/icon-gallery.svg',
        tealIcon: '/menu-icons/teal/icon-gallery.svg',
        url: '/players',
        currentUrl: new RegExp('^(/(nba|nfl|nhl|mlb|pga))?/players$'),
      },
      {
        text: 'Shop',
        icon: '/menu-icons/icon-shop.svg',
        tealIcon: '/menu-icons/teal/icon-shop.svg',
        url: 'https://shop.statmuse.com',
        external: true,
      },
      {
        text: 'Blog',
        icon: '/menu-icons/icon-blog.svg',
        tealIcon: '/menu-icons/teal/icon-blog.svg',
        url: 'https://blog.statmuse.com/',
        external: true,
      },
    ],
  },
  {
    header: 'Search',
    links: [
      {
        text: 'Examples',
        icon: '/menu-icons/icon-examples.svg',
        tealIcon: '/menu-icons/teal/icon-examples.svg',
        url: '/product/examples',
        currentUrl: new RegExp('^/product/examples(/(nba|nfl|nhl|mlb|pga))?$'),
      },
      {
        text: 'Data & Glossary',
        icon: '/menu-icons/icon-data-coverage.svg',
        tealIcon: '/menu-icons/teal/icon-data-coverage.svg',
        url: '/product/data',
        currentUrl: new RegExp('^/product/data(/(nba|nfl|nhl|mlb|pga))?$'),
      },
      // {
      //   text: 'Authentic Voices',
      //   icon: '/menu-icons/icon-voice.svg',
      //   icon: '/menu-icons/teal/icon-voice.svg',
      //   url: '/product/voices',
      //   currentUrl: ['/product/voices'],
      // },
      // {
      //   text: 'Tutorials',
      //   icon: '/menu-icons/icon-glossary.svg',
      //   icon: '/menu-icons/teal/icon-glossary.svg',
      //   url: 'https://blog.statmuse.com/tagged/tutorial',
      // },
    ],
  },
  {
    header: 'Play',
    links: [
      {
        text: 'Elements of Bball',
        icon: '/menu-icons/icon-elements-of-bball.svg',
        tealIcon: '/menu-icons/teal/icon-elements-of-bball.svg',
        url: 'https://elementsofbasketball.com/',
        external: true,
      },
      {
        text: 'Harden Maze',
        icon: '/menu-icons/icon-harden-maze.svg',
        tealIcon: '/menu-icons/teal/icon-harden-maze.svg',
        url: 'https://hardenmaze.com/',
        external: true,
      },
    ],
  },
  {
    header: 'Company',
    links: [
      {
        text: 'About',
        icon: '/menu-icons/icon-about.svg',
        tealIcon: '/menu-icons/teal/icon-about.svg',
        url: '/company/about',
        currentUrl: new RegExp('^/company/about$'),
      },
    ],
  },
] as {
  header?: string
  links: {
    text: string
    icon: string
    tealIcon: string
    url: string
    external?: boolean
    currentUrl: RegExp
  }[]
}[]
---

<input id="menu" type="checkbox" class="hidden peer" />
<label for="menu">
  <ElephantIcon
    class="block relative w-[38px] h-[38px] cursor-pointer mr-2 md:hidden"
  />
</label>
<label for="menu">
  <HamburgerIcon
    class="hidden w-[25px] h-[25px] relative cursor-pointer fill-team-secondary md:block"
  />
</label>
<div class="hidden peer-checked:block">
  <label for="menu">
    <div
      class="absolute top-0 left-0 w-screen h-screen bg-white opacity-80 z-[5]"
    >
    </div>
  </label>
  <a
    href="/"
    class="absolute top-[15px] left-1/2 -translate-x-1/2 md:top-[22px] md:left-[65px] md:transform-none [--team-primary-color:initial] [--team-secondary-color:initial] z-10"
  >
    <Logo class="w-[150px] fill-black" />
  </a>
  <div
    class="absolute top-0 left-0 h-screen w-3/4 md:w-[237px] bg-[#f9f9f9] z-[5]"
  >
    <div class="flex items-center h-[55px] md:h-[70px] px-3 md:px-5">
      <label for="menu">
        <CloseIcon
          class="block w-5 h-5 cursor-pointer relative ml-1 md:ml-0.5"
        />
      </label>
    </div>
    {
      menuLinks.map(({ header, links }) => (
        <div class="mb-7">
          {header && (
            <h3 class="text-[0.8rem] text-[#969ca1] uppercase tracking-[0.07rem] my-3 ml-3 md:ml-5">
              {header}
            </h3>
          )}
          <ul>
            {links.map(
              ({ icon, tealIcon, text, url, external, currentUrl }) => (
                <li
                  class={`my-0.5 py-1.5 ${
                    currentUrl && currentUrl.test(Astro.url.pathname)
                      ? 'bg-white font-semibold'
                      : ''
                  }`}
                >
                  <a
                    class="group flex items-center text-black hover:text-primary hover:no-underline ml-3 md:ml-5 flex-1 md:flex-initial"
                    href={url}
                    target={external ? '_blank' : null}
                  >
                    {currentUrl && currentUrl.test(Astro.url.pathname) ? (
                      <img
                        src={tealIcon}
                        class="block w-[29px] h-[29px] mr-2 object-cover"
                      />
                    ) : (
                      <>
                        <img
                          src={icon}
                          class="block group-hover:hidden w-[29px] h-[29px] mr-2 object-cover "
                        />
                        <img
                          src={tealIcon}
                          class="hidden group-hover:block w-[29px] h-[29px] mr-2 object-cover"
                        />
                      </>
                    )}
                    {text}
                  </a>
                </li>
              )
            )}
          </ul>
        </div>
      ))
    }
  </div>
</div>
