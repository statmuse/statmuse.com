---
import Logo from '@components/logo.astro'
import AskBar from '@components/ask-bar.astro'
import AnswerShare from '@components/answer-share.astro'
import DropdownMenu from '@components/dropdown-menu.astro'
import { clean } from '@lib/meta'

interface Props {
  query?: string
  conversationToken?: string
  preferredDomain?: string
  share?: {
    type: 'ask' | 'musing' | 'profile'
    shortCode?: string
    url?: string
    query?: string
    domain?: string
  }
}

const query = Astro.props.query ? clean(Astro.props.query) : undefined
const conversationToken = Astro.props.conversationToken
const preferredDomain = Astro.props.preferredDomain
const share = Astro.props.share
---

<div
  class="grid grid-cols-[1fr_minmax(auto,_1250px)_1fr] items-center min-h-[62px] md:min-h-[70px] py-2 md:py-3 px-3 md:px-5 z-[5] bg-team-primary sticky top-0"
>
  <div class="flex col-start-1 col-span-1">
    <div>
      <DropdownMenu showElephant />
    </div>
    <a href="/" class="hidden md:block">
      <Logo class="w-[150px] mx-5" />
    </a>
  </div>
  <div class="col-start-2 col-span-1 max-w-[780px] flex">
    <div class="flex-1">
      <AskBar {query} {conversationToken} {preferredDomain} />
    </div>
    <div
      class="md:flex md:w-fit w-0 items-center ml-4 space-x-4 overflow-hidden"
    >
      {share && <AnswerShare {...share} />}
    </div>
  </div>
</div>
