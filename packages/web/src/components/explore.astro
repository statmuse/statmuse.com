---
import { createAskPath } from '@lib/path'
import FreestarVideo from './freestar-video.astro'
interface Props {
  domain?: string
  additionalQuestions?: { domain?: string; text: string }[]
  showVideo?: boolean
}

const { domain, additionalQuestions, showVideo = false } = Astro.props
---

<div class="mt-6 mb-4">
  <h3 class="text-4xl font-semibold">Explore</h3>
  <div
    class="grid grid-cols-[repeat(auto-fit,_minmax(300px,_1fr))] gap-2 items-start"
  >
    {showVideo && <FreestarVideo {domain} />}
    {
      additionalQuestions ? (
        <ul
          class="p-4 border border-black rounded-md"
          data-cy-related-questions
        >
          {additionalQuestions.slice(0, 3).map((question) => (
            <li class="flex-1 min-w-[210px] my-1.5 sm:my-2.5 flex gap-1.5 leading-snug">
              <i class="w-5 h-5 shrink-0 explore-search-icon" />
              <a
                href={createAskPath({
                  domain: question.domain?.toLowerCase() || domain || '',
                  query: question.text,
                })}
                data-track-click="Click Try-Also Query"
              >
                {question.text}
              </a>
            </li>
          ))}
          <li class="flex-1 min-w-[210px] my-1.5 sm:my-2.5 flex gap-1.5 leading-snug">
            <i class="w-5 h-5 shrink-0 explore-flame-icon" />
            <a href={domain ? `/${domain}/questions` : '/questions'}>
              See trending
            </a>
          </li>
        </ul>
      ) : (
        <div />
      )
    }
    <!-- placeholder divs -->
    {!showVideo && <div />}
    <div></div>
  </div>
</div>
<script>
  document
    .querySelectorAll<HTMLElement>('[data-track-click="Click Try-Also Query"]')
    .forEach((el) => {
      el.addEventListener('click', () => {
        analytics.track(el.dataset.trackClick, {
          query: el.innerText,
          referrer: window.location.href,
        })
      })
    })
</script>
