---
import Image from '@components/image.astro'
import type { PlayerCard } from '@statmuse/core/gamera'

interface Props {
  card: PlayerCard
}

const lastName = (s: string) => {
  const names = s.split(' ')
  return names[names.length - 1]
}

const { card } = Astro.props
---

<div
  class="flex rounded-2xl overflow-hidden px-2.5"
  style={{
    backgroundColor: card.players[0].colors?.backgroundColor ?? '#FFF',
    color: card.players[0].colors?.foregroundColor ?? '#000',
  }}
>
  {
    card?.players.map((player, i) => (
      <div class="text-center w-1/3 h-56 flex flex-col justify-between items-center">
        <div>
          <h3 class="text-3xl mt-3">{player.statDisplayValue}</h3>
          <p class="uppercase text-xs tracking-[0.07rem]">
            {lastName(player.entity.display)}
          </p>
        </div>
        <Image
          class="h-36"
          style={{
            maxWidth: 'initial',
            width: 'initial',
            zIndex: 3 - i,
          }}
          src={player.imageUrl}
          alt={player.entity.display}
          width={400}
          height={400}
          loading="eager"
        />
      </div>
    ))
  }
</div>
