---
import type { HTMLAttributes } from 'astro/types'
import { rgbToHex } from '@statmuse/core/color'

type Color = string | { r: number; g: number; b: number; a: number }

interface Props extends HTMLAttributes<'div'> {
  background?: Color
  foreground?: Color
}

const { class: classes, background, foreground, ...props } = Astro.props

const backgroundHex = background
  ? typeof background === 'string'
    ? background
    : rgbToHex(background)
  : undefined
const foregroundHex = foreground
  ? typeof foreground === 'string'
    ? foreground
    : rgbToHex(foreground)
  : undefined
---

<div
  class:list={{
    'rounded-2xl px-2.5 py-2 overflow-clip': true,
    'bg-gray-8': !background,
    'text-gray-1': !foreground,
    'border border-gray-6': !background,
    [classes ?? '']: !!classes,
  }}
  style={`${backgroundHex ? `background-color: ${backgroundHex};` : ''} ${
    foregroundHex ? `color: ${foregroundHex};` : ''
  }`}
  {...props}
>
  <slot />
</div>
