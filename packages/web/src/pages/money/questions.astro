---
import BaseLayout from '@layouts/money-base.astro'
import Header from '@components/header.astro'
import Footer from '@components/footer.astro'
import AskIndex from '@components/ask-index.astro'
import { getFinanceAsksIndex } from '@statmuse/core/ask'
import { parseSearchParams } from '@lib/asks'
import { Caching } from '@lib/caching'

const searchParams = parseSearchParams(Astro.url.searchParams)
const asks = await getFinanceAsksIndex(searchParams)

Caching.swr(Astro)
---

<BaseLayout
  analytics={{
    page_type: 'question',
    page_domain: 'finance',
  }}
>
  <Header money />
  <AskIndex
    selected="money"
    headline="Trending Finance Searches"
    {asks}
    {searchParams}
  />
  <Footer />
</BaseLayout>
