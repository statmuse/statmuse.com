---
import Panel from '@components/panel.astro'
import type { MlbGameDataResponse, MlbStatKey } from '@statmuse/core/gamera'
import { find } from 'lodash-es'
import Icon from '@components/icon.svelte'

interface Props {
  venue: MlbGameDataResponse<MlbStatKey>['venue']
  weather: MlbGameDataResponse<MlbStatKey>['weather']
  officials: MlbGameDataResponse<MlbStatKey>['officials']
}

const { venue, weather, officials } = Astro.props
---

<Panel title="Game Info">
  <div class="space-y-3">
    <div>
      <p class="flex gap-1.5 items-center">
        <Icon name="stadium" class="w-5 h-5" />{venue.name}
      </p>
      <p class="text-sm text-gray-5 ml-[29px]">{venue.location}</p>
    </div>
    {
      weather && (
        <div class="flex gap-3">
          <p class="flex gap-1.5 items-center">
            <Icon name="weather" class="w-5 h-5" />
            {weather.temperatureFahrenheit}Â°
          </p>
          <p class="flex gap-1.5 items-center">
            <Icon name="wind" class="w-5 h-5" />
            {`${weather.wind.speedMph} mph ${weather.wind.direction}`}
          </p>
        </div>
      )
    }
    {
      officials && officials.length > 0 && (
        <div class="flex gap-1.5">
          <Icon name="umpire" class="w-5 h-5 mt-0.5" />
          <div>
            <p>
              <span class="text-gray-5">Home Plate:</span>{' '}
              {find(officials, { assignment: 'homePlate' })?.fullName}
            </p>
            <p>
              <span class="text-gray-5">First Base:</span>{' '}
              {find(officials, { assignment: 'firstBase' })?.fullName}
            </p>
            <p>
              <span class="text-gray-5">Second Base:</span>{' '}
              {find(officials, { assignment: 'secondBase' })?.fullName}
            </p>
            <p>
              <span class="text-gray-5">Third Base:</span>{' '}
              {find(officials, { assignment: 'thirdBase' })?.fullName}
            </p>
          </div>
        </div>
      )
    }
  </div>
</Panel>
