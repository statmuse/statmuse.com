---
import MlbPregameBoxscore from './mlb-pregame-boxscore.astro'
import MlbLivegameBoxscore from './mlb-livegame-boxscore.astro'
import { parseGameId } from '@lib/parse'
import { NOT_FOUND_404 } from '@lib/response'
import { getGameData } from '@lib/gamera'

const { league, game } = Astro.params
const gameId = parseGameId(game ?? '')

const gameData = await getGameData({
  context: Astro,
  gameId,
  statKeySet: ['pitchingStandard', 'battingStandard'],
})

if (!gameData) return NOT_FOUND_404
---

{
  (function () {
    switch ('inProgress') {
      case 'scheduled':
        return <MlbPregameBoxscore {gameData} />
      case 'inProgress':
        return <MlbLivegameBoxscore {gameData} />
    }
  })()
}
