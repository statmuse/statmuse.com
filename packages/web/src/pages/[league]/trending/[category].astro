---
import TrendingComponent from '@components/trending.astro'
import { Caching } from '@lib/caching'
import { NOT_FOUND_404 } from '@lib/response'
import { leaguePaths } from "./index.astro"
import type { LeagueParam } from '@lib/params'

if (!Astro.params.league || !leaguePaths.includes(Astro.params.league))
  return NOT_FOUND_404

const categories = [
  'searches',
  'players',
  'teams',
  'player',
  'team',
  'money',
] as const

type Category = (typeof categories)[number]

const league = Astro.params.league as LeagueParam
const category = Astro.params.category as Category 

if (!categories.includes(category as Category)) {
  return NOT_FOUND_404
}

Caching.swr(Astro)
---

<TrendingComponent league={league} selected={league} {category} />
