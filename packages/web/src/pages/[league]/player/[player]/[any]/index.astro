---
import { getPlayerBio } from '@lib/player'
import { getUrlForEntity, type GameraDomain } from '@statmuse/core/gamera'

const player = Astro.props.player || Astro.params.player
const league = Astro.props.league || Astro.params.league
const bio = await getPlayerBio(league as GameraDomain, player)
if (!bio) return new Response(null, { status: 404, statusText: 'Not found' })

const playerPath = getUrlForEntity({
  type: 'player',
  domain: bio.domain,
  id: bio.playerId.toString(),
  display: bio.usedName,
})
return Astro.redirect(playerPath, 301)
---
