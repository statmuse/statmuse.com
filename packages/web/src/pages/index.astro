---
import BaseLayout from '@layouts/base.astro'
import Logo from '@components/logo.astro'
import AskBar from '@components/ask-bar.astro'
import Image from '@components/image.astro'
import Musings from '@components/musings.astro'
import Footer from '@components/footer.astro'
import DropdownMenu from '@components/dropdown-menu.astro'
import { listOnboarding } from '@statmuse/core/examples'
import MenuLinks from '@components/menu-links.astro'
import NewsletterSignup from '@components/newsletter-signup.astro'
import FreestarVideo from '@components/freestar-video.astro'

const examples = await listOnboarding()
const banner = examples[Math.floor(Math.random() * examples.length)]

Astro.response.headers.set(
  'Cache-Control',
  'public, s-maxage=60, stale-while-revalidate=86400'
)
---

<BaseLayout>
  <main
    id="home"
    class="home-layout [--header-height:55px] md:[--header-height:64px]"
  >
    <div class="sidebar hidden md:block min-w-[75px] bg-[#f9f9f9]">
      <div
        class="sticky top-0 bg-[#f9f9f9] border-t border-transparent w-[237px]"
      >
        <span
          class="sidebar-hamburger-icon block w-[33px] h-[33px] my-[15.5px] ml-5 cursor-pointer"
        >
        </span>
        <MenuLinks />
      </div>
    </div>

    <div
      class="main h-[var(--header-height)] px-3 md:px-[21px] bg-white flex items-center sticky md:relative top-0 z-20"
    >
      <div class="md:hidden">
        <DropdownMenu />
      </div>

      <div class="flex space-x-5 items-center flex-1 justify-end"></div>
    </div>

    <div class="main content-layout">
      <div class="-mb-[5px] z-10">
        <div class="flex flex-col md:flex-row items-center mt-[55px] md:mt-0">
          <div class="flex-1 mb-[34px] md:-mr-[20px] md:mb-0">
            <Logo />
          </div>
          <Image
            class="max-w-[70%] md:max-w-none md:h-[205px] md:pr-[10px] object-contain object-bottom"
            src={banner}
            alt={banner.text}
            width={250}
            height={250}
            loading="eager"
          />
        </div>
      </div>
      <div
        class="content-item-full content-layout mb-5 md:mb-[30px] sticky top-[var(--header-height)] md:top-0 py-[5px] bg-white z-[5]"
      >
        <div class="min-h-[46px]">
          <AskBar />
        </div>
      </div>
      <div>
        <div class="flex flex-nowrap gap-[5px] mb-2.5">
          <a
            class="flex items-center justify-center border border-primary rounded-md hover:text-white hover:bg-primary hover:no-underline p-[5px] flex-1 bg-primary text-white"
            href="/"
            set:text="All"
          />
          <a
            class="flex items-center justify-center border border-primary rounded-md text-primary hover:text-white hover:bg-primary hover:no-underline p-[5px] flex-1"
            href="/nba"
            set:text="NBA"
          />
          <a
            class="flex items-center justify-center border border-primary rounded-md text-primary hover:text-white hover:bg-primary hover:no-underline p-[5px] flex-1"
            href="/nfl"
            set:text="NFL"
          />
          <a
            class="flex items-center justify-center border border-primary rounded-md text-primary hover:text-white hover:bg-primary hover:no-underline p-[5px] flex-1"
            href="/nhl"
            set:text="NHL"
          />
          <a
            class="flex items-center justify-center border border-primary rounded-md text-primary hover:text-white hover:bg-primary hover:no-underline p-[5px] flex-1"
            href="/mlb"
            set:text="MLB"
          />
          <a
            class="flex items-center justify-center border border-primary rounded-md text-primary hover:text-white hover:bg-primary hover:no-underline p-[5px] flex-1"
            href="/pga"
            set:text="PGA"
          />
          <a
            class="hidden md:flex items-center justify-center border border-secondary rounded-md text-secondary hover:text-white hover:bg-secondary hover:no-underline p-[5px] flex-1 min-w-fit"
            href="/fantasy"
            set:text="Fantasy"
          />
          <a
            class="hidden md:flex items-center justify-center border border-[#003ca8] rounded-md text-[#003ca8] hover:text-white hover:bg-[#003ca8] hover:no-underline p-[5px] flex-1 min-w-fit"
            href="/money"
            set:text="Money"
          />
        </div>
        <div class="flex flex-nowrap gap-[5px] mb-2.5 md:hidden">
          <a
            class="flex items-center justify-center border border-secondary rounded-md text-secondary hover:text-white hover:bg-secondary hover:no-underline p-[5px] flex-1 max-w-fit"
            href="/fantasy"
            set:text="Fantasy"
          />
          <a
            class="flex items-center justify-center border border-[#003ca8] rounded-md text-[#003ca8] hover:text-white hover:bg-[#003ca8] hover:no-underline p-[5px] flex-1 max-w-fit"
            href="/money"
            set:text="Money"
          />
        </div>
      </div>
      <!-- <div class="mb-[30px] mt-[32px] w-full md:w-[400px]">
        <FreestarVideo />
      </div> -->
      <Musings />
      <h4 class="font-semibold text-right py-4">
        <a href="/questions">See trending searches</a>
      </h4>
      <NewsletterSignup />
    </div>

    <div class="main">
      <Footer />
    </div>
  </main>
</BaseLayout>
