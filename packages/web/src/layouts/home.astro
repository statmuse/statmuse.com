---
import BaseLayout from '@layouts/base.astro'
import MoneyBaseLayout from '@layouts/money-base.astro'
import type { Metadata } from '@lib/meta'
import type { AnalyticsPageviewProperties } from '@lib/analytics'
import NewsletterSignup from '@components/newsletter-signup.astro'
import type { LeagueParam } from '@lib/params'
import type { NavLink } from 'src/types'

interface Props {
  league?: LeagueParam | 'All'
  meta?: Metadata
  colors?: {
    foreground?: string
    background?: string
    foregroundColor?: string
    backgroundColor?: string
  }
  class?: string | null
}

const { league = 'All', ...rest } = Astro.props

const links: NavLink[] = [
  { text: 'All', param: 'all', href: '/' },
  { text: 'FC', param: 'fc' },
  { text: 'NBA', param: 'nba' },
  { text: 'NFL', param: 'nfl' },
  { text: 'NHL', param: 'nhl' },
  { text: 'MLB', param: 'mlb' },
  { text: 'PGA', param: 'pga' },
  { text: 'Money', param: 'money' },
]

const Layout = league === 'money' ? MoneyBaseLayout : BaseLayout
---

<Layout
  {...rest}
  analytics={{
    page_domain:
      league === 'All'
        ? 'sports'
        : league === 'money'
        ? 'finance'
        : league === 'fc'
        ? 'epl'
        : (league as AnalyticsPageviewProperties['page_domain']),
    page_type: 'home',
  }}
  preferredDomain={league === 'fc'
    ? 'epl'
    : league === 'All'
    ? undefined
    : league}
  navProps={{
    links,
    selected: league.toLowerCase(),
    href: (league) => `/${league}`,
  }}
>
  <main
    class:list={{
      'md:flex w-full': true,
      [Astro.props.class ?? '']: !!Astro.props.class,
    }}
  >
    <slot />
  </main>
  <NewsletterSignup />
</Layout>
